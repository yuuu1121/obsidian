- 히스토그램은 관찰 데이터의 빈도수를 막대그래프로 표시.
- 데이터의 확률분포함수를 추정할 수 있음.
> cv2.calHist(images, channels, mask, histSize, ranges[, hist[,accumulate]]) -> hist
- mask : images[i]와 같은 크기의 8비트 영상. 
- accumulate = True : calHist()함수를 수행할 때 이전 값 누적.

```python
# 0503.py
import cv2
import numpy as np

src = np.array([[0, 0, 0, 0],
				[1, 1, 3, 5],
				[6, 1, 1, 3],
				[4, 3, 1, 7]
				], dtype=np.uint8)

hist1 = cv2.calcHist(images=[src], channels=[0], mask=None, histSize=[4], ranges=[0, 8])
print('hist1 = ', hist1)  

hist2 = cv2.calcHist(images=[src], channels=[0], mask=None, histSize=[4], ranges=[0, 4])
print('hist2 = ', hist2)
```

```output
hist1 =  [[9.]
 [3.]
 [2.]
 [2.]]
hist2 =  [[4.]
 [5.]
 [0.]
 [3.]]
```
- hist1 = cv2.calcHist(images=[src], channels=[0], mask=None, histSize=[4], ranges=[0, 8]) :
	- `channels=[0]` : **채널 선택** (그레이스케일 이미지라서 `0` 채널 사용)
	- `mask=None` : **전체 이미지 사용** (마스크 없음)
	- `histSize=[4]` : **히스토그램의 bin 개수 (4개 구간)**, 픽셀 값 0~7을 **4개 구간으로 그룹화**하여 빈도수를 계산
	- `ranges=[0, 8]` : **픽셀 값의 범위 (0~7)**
- hist2 = cv2.calcHist(images=[src], channels=[0], mask=None, histSize=[4], ranges=[0, 4]) :
	-  ranges=[0, 4] : 
		- **픽셀 값 0~3까지만 고려**하고, 4 이상의 값은 무시됨
		- `4개의 bin`을 사용하므로, **각 bin의 크기는 1 (4/4)**
		- 즉, **각 픽셀 값 0, 1, 2, 3이 각각 하나의 bin을 차지함**

```python
# 0504.py
import cv2
import numpy as np
from matplotlib import pyplot as plt

src = cv2.imread('./data/lena.jpg', cv2.IMREAD_GRAYSCALE)

hist1 = cv2.calcHist(images=[src], channels=[0], mask=None, histSize=[32], ranges=[0, 256])

hist2 = cv2.calcHist(images=[src], channels=[0], mask=None, histSize=[256], ranges=[0, 256])

#1
hist1 = hist1.flatten()
hist2 = hist2.flatten()

#2
plt.title('hist1: binX = np.arange(32)')
plt.plot(hist1, color='r')
binX = np.arange(32)

plt.bar(binX, hist1, width=1, color='b')
plt.show()

#3
plt.title('hist1: binX = np.arange(32)*8')
binX = np.arange(32)*8
plt.plot(binX, hist1, color='r')
plt.bar(binX, hist1, width=8, color='b')
plt.show()

#4
plt.title('hist2: binX = np.arange(256)')
plt.plot(hist2, color='r')
binX = np.arange(256)
plt.bar(binX, hist2, width=1, color='b')
plt.show()
```
![[3_Archive/1_Attachments/019208b0c1b6c36ecffd7bddee4db482_MD5.jpeg|400]]
![[3_Archive/1_Attachments/3b885b01581f5c462c2cc47e7050d35b_MD5.jpeg|400]]
![[3_Archive/1_Attachments/df1ab7000160a277a80bd9ae58de497e_MD5.jpeg|400]]