---
date: 2025-03-11
status: Permanent
tags: 
  - Study/OpenCV
aliases: 
keywords: 
related notes: 
reference: 
author: 
url: 
dg-publish: false
---
영상을 날카롭게 하는 샤프닝(Sharpening) 연산은 미분 연산으로 구성.
### 1. 차분 미분 연산
- 1차원 함수 f(x)에서 1차 미분, f'(x)을 컴퓨터를 이용하여 근사적으로 계산하는 방법 :
	인접한 값의 차분으로 계산.
> 	$f'(x) = \frac{∂f(x)}{∂x}$ = $\lim_{h \to 0} \frac{f(x+h) - f(x)}{h} = f(x+1)-f(x)$, if $h=1$
	
	2차 미분 $f''(x)$ 
>	$f''(x) = \frac{∂^2f(x)}{∂^2x}$ =  $f(x+1)+f(x-1)-2f(x)$

- 2차원 함수인 영상 f(x,y)의 gradient $\nabla f(x,y)$는  x-축 방향으로의 편미분 $g_x$, y-축 방향으로의 편미분 $g_y$에 의한 2x1 벡터. 이 벡터의 크기는 $mag(\nabla f(x,y))$, 방향은 $\theta$.
	- $mag(\nabla f(x,y))$가 큰 값을 갖는 화소는 edge 화소.

### 2. 1차 미분 필터
- x-축 방향으로의 편미분 $g_x$, y-축 방향으로의 편미분 $g_y$을 계산하는 대표적인 방법이 Sobel연산자.
	-  Sobel연산자 : 
		- 1차 미분(Gradient)을 계산하여 밝기 변화가 급격한 부분(엣지, Edge)을 찾음.
		- 가우시안 필터와 차분 연산을 결합하여 노이즈에 강한 특징을 가짐.
		-  **Sobel 커널 (3×3)**
			- Sobel 연산자는 **두 개의 3×3 커널(마스크, Kernel)을 사용**하여 경계를 검출.
			**① X 방향 미분 필터 ($G_x$)**			
				$G_x = \begin{bmatrix} -1 & 0 & +1 \\ -2 & 0 & +2 \\ -1 & 0 & +1 \end{bmatrix}$
				 - **이미지에서 수평(가로) 방향의 엣지를 검출**  
				 - 오른쪽 방향으로 밝기가 증가하면 양수, 감소하면 음수
			**② Y 방향 미분 필터 (`G_y`)**
				$G_y = \begin{bmatrix} -1 & -2 & -1 \\ 0 & 0 & 0 \\ +1 & +2 & +1 \end{bmatrix}$
				- **이미지에서 수직(세로) 방향의 엣지를 검출**  
				- 아래 방향으로 밝기가 증가하면 양수, 감소하면 음수.
			- 최종 엣지 크기 계산 : $G=\sqrt {Gx^2​+Gy^2​}$

### 3. 2차 미분 필터
- 2차원 함수 f(x,y)의 라플라시안 ​$\nabla ^2f(x,y)$의 수식은 x, y축의 2차 편미분의 합.


----------------------------------------------------------------------------------------------
>cv2.Sobel(src, ddepth, dx, dy,[, dst[,  ksize[,scale[,delta[, dorderType ]]]]]) -> dst
- ksize는 Sobel 윈도우 필터의 크기로 1,3,5,7이다.